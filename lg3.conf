#!/bin/bash
### Default Configuration File for the LG3 Pipeline
### DO NOT EDIT THIS FILE!

### Assert that LG3_HOME is set
LG3_HOME=${LG3_HOME?}

#--------------------------------------------------------------------
# Patient data
#--------------------------------------------------------------------
CONV=${CONV:-patient_ID_conversions.tsv}


RECAL_BAM_EXT=${RECAL_BAM_EXT:-bwa.realigned.rmDups.recal.bam}
#RECAL_BAM_EXT=${RECAL_BAM_EXT:-mem.sorted.mrkDups.recal.bam}


#--------------------------------------------------------------------
# Configure LG3 software dependencies
#--------------------------------------------------------------------
module load CBI 2> /dev/null

if [[ ${CLUSTER} == "tipcc" ]]; then
     module load jdk/1.6.0 2> /dev/null
else
     module load openjdk/1.6.0 2> /dev/null
fi
JAVA=$(which java)

module load python/2.7.9 2> /dev/null
PYTHON=$(which python)

module load r/3.2.0 2> /dev/null
RSCRIPT=$(which Rscript)

module load annovar/2011-10-02 2> /dev/null
ANNOVAR_HOME=$(dirname $(which annotate_variation.pl))

module load mutect/1.0.27783 2> /dev/null
MUTECT=${MUTECT_JAR}

module load bedtools2/2.16.2 2> /dev/null
BEDTOOLS=$(which bedtools)

module load cutadapt/1.2.1 2> /dev/null
CUTADAPT=$(which cutadapt)

module load bwa/0.5.10 2> /dev/null
BWA=$(which bwa)

module load gatk/1.6-5-g557da77 2> /dev/null
GATK=${GATK_HOME}/GenomeAnalysisTK.jar

module load picard/1.64 2> /dev/null
# Sets PICARD_HOME as we want here

module load pindel/0.2.4t 2> /dev/null
PINDEL=$(which pindel)
PINDEL2VCF=$(which pindel2vcf)

module load samtools/0.1.18 2> /dev/null
SAMTOOLS=$(which samtools)

module load trimgalore/0.4.4 2> /dev/null
TG=$(which trim_galore)

#module load gatk/4.1.1.0 2> /dev/null
#GATK4=$(which gatk)
GATK4=${GATK4:-${LG3_HOME}/tools/gatk-4.1.1.0/gatk}

#--------------------------------------------------------------------
# Annotation data resources
#--------------------------------------------------------------------
INTERVAL=${INTERVAL:-${LG3_HOME}/resources/All_exome_targets.extended_200bp.interval_list}
#INTERVAL=${INTERVAL:-${LG3_HOME}/resources/SeqCap_EZ_Exome_v3_capture.interval_list"}
ILIST=${ILIST:-${INTERVAL}}
TARGET=${TARGET:-${LG3_HOME}/resources/All_exome_targets.extended_200bp.bed}
PADDING=${PADDING:-0}

LG3_CHASTITY_FILTERING=${LG3_CHASTITY_FILTERING:-false}

BWA_INDEX=${BWA_INDEX:-${LG3_HOME}/resources/UCSC_hg19/hg19.fa}
REF=${REF:-${LG3_HOME}/resources/UCSC_hg19/hg19.fa}
REF_DICT=${REF_DICT:-${LG3_HOME}/resources/UCSC_hg19/hg19.dict}

### Resources for VariantRecalibrator
#DBSNP=${DBSNP:-/home/GenomeData/dbSNP/150/b37/GATK/All_20170403.vcf}
DBSNP=${DBSNP:-/home/jocostello/shared/LG3_Pipeline_HIDE/resources/bundle.2.8/dbsnp_138.hg19.vcf}
INDEL_MILLS=${INDEL_MILLS:-${LG3_HOME}/resources/bundle.2.8/Mills_and_1000G_gold_standard.indels.hg19.sites.vcf}
THOUSAND=${THOUSAND:-${INDEL_MILLS}}
SNP_OMNI=${SNP_OMNI:-${LG3_HOME}/resources/bundle.2.8/1000G_omni2.5.hg19.sites.vcf}
SNP_HAPMAP=${SNP_HAPMAP:-${LG3_HOME}/resources/bundle.2.8/hapmap_3.3.hg19.sites.vcf}
SNP_1000G=${SNP_1000G:-${LG3_HOME}/resources/bundle.2.8/1000G_phase1.snps.high_confidence.hg19.sites.vcf}
AXIOM=${AXIOM:-${LG3_HOME}/resources/Axiom_Exome_Plus.genotypes.all_populations.poly.hg19.vcf}

## "New" version of Pindel, cf. https://github.com/UCSF-Costello-Lab/LG3_Pipeline/issues/122
# PINDEL=${PINDEL:-/home/shared/cbc/software_cbc/pindel-0.2.5b8/pindel}
# PINDEL2VCF=${PINDEL2VCF:-/home/shared/cbc/software_cbc/pindel-0.2.5b8/pindel2vcf}

### Mutect2 flow control
bOBMM=${bOBMM:-true}  ## Recommended OBMM filter
bCC=${bCC:-true}      ## Calculate cross-sample contamination
bOB=${bOB:-false}     ## Deprecated filter
bAA=${bAA:-false}     ## Additional artefact filter (more strict, experimental!)
bFUNC=${bFUNC:-true}  ## Functional annotations with FUNCOTATOR 

GNOMAD=${GNOMAD:-/home/GenomeData/GATK_bundle/Mutect2/af-only-gnomad.raw.sites.hg19.vcf.gz}
#GNOMAD=${GNOMAD:-/home/GenomeData/gnomAD_hg19/mutect2/gnomad4mutect2.vcf.gz}
af_of_alleles_not_in_resource=${af_of_alleles_not_in_resource:-0.000004}
### Population allele fraction assigned to alleles not found in germline resource.
### See docs/mutect/mutect2.pdf for derivation of default value.
### af-of-alleles-not-in-resource == 1(2*N.of.samples in GNOMAD)
### Default 0.001 if there is no population germline resource;
### If Gnomad 125,748 exomes ==> 0.000004
GNOMAD2=${GNOMAD2:-/home/GenomeData/gnomAD_hg19/mutect2/mutect2-contamination-var.biall.vcf.gz}

### Mutect2: --contamination-fraction-to-filter  [0]
CONTF2F=${CONTF2F:-0}

FUNCO_PATH=${FUNCO_PATH:-/home/GenomeData/GATK_bundle/funcotator/funcotator_dataSources.v1.6.20190124s}
